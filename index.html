<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto HTML + Bootstrap + JS</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- SweetAlert2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">Mi Proyecto</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#inicio">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sobre">Sobre</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contacto">Contacto</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="inicio" class="hero-section bg-light py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-12">
                    <h3>
                        Mi tabla dinamica
                    </h3>
                    <table class="table table-striped trebeca" >
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Edad</th>
                                <th>Ciudad</th>
                                <th>
                                    <button type="button" class="btn btn-success btn-sm me-1 btn-add-row">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ana</td>
                                <td>28</td>
                                <td>Madrid</td>
                                <td>
                                    <button type="button" class="btn btn-warning btn-sm me-1 edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button type="button" class="btn btn-danger btn-sm delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>Juan</td>
                                <td>34</td>
                                <td>Barcelona</td>
                                <td>
                                    <button type="button" class="btn btn-warning btn-sm me-1 edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button type="button" class="btn btn-danger btn-sm delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>Laura</td>
                                <td>25</td>
                                <td>Valencia</td>
                                <td>
                                    <button type="button" class="btn btn-warning btn-sm me-1 edit-btn">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button type="button" class="btn btn-danger btn-sm delete-btn">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="3" class="text-end fw-bold">Total de registros:</td>
                                <td class="fw-bold" id="totalCount">3</td>
                            </tr>
                        </tfoot>
                    </table>
                    
                    <!-- Modal para añadir/editar registro -->
                    <div class="modal fade" id="personModal" tabindex="-1" aria-labelledby="personModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="personModalLabel">Añadir Persona</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form id="personForm">
                                        <div class="mb-3">
                                            <label for="personName" class="form-label">Nombre</label>
                                            <input type="text" class="form-control" id="personName" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="personAge" class="form-label">Edad</label>
                                            <input type="number" class="form-control" id="personAge" min="1" max="120" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="personCity" class="form-label">Ciudad</label>
                                            <input type="text" class="form-control" id="personCity" required>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                    <button type="button" class="btn btn-primary" id="savePersonBtn">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p>&copy; 2025 Mi Proyecto. Todos los derechos reservados.</p>
                </div>
                <div class="col-md-6 text-end">
                    <p>Desarrollado con ❤️ usando Bootstrap</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom JavaScript -->
    <script src="js/trebeca.js"></script>
    <script>
        // trebeca.js
        const data = [
            {id: 1, name: 'Ana', age: 28, city: 'Madrid', phone: '1234567890', email: 'ana@example.com', salary: 13000},
            {id: 2, name: 'Juana', age: 34, city: 'Barcelona', phone: '2345678901', email: 'juana@example.com', salary: 24000},
            {id: 3, name: 'Laura', age: 25, city: 'Valencia', phone: '3456789012', email: 'laura@example.com', salary: 13500},
            {id: 4, name: 'Rebeca', age: 25, city: 'Valencia', phone: '4567890123', email: 'rebeca@example.com', salary: 23200},
            {id: 5, name: 'Fernanda', age: 20, city: 'Pachuca', phone: '5678901234', email: 'fernanda@example.com', salary: 12800},
            {id: 6, name: 'Carlos', age: 30, city: 'Monterrey', phone: '6789012345', email: 'carlos@example.com', salary: 14500},
            {id: 7, name: 'Luis', age: 22, city: 'Guadalajara', phone: '7890123456', email: 'luis@example.com', salary: 12900},
            {id: 8, name: 'Miguel', age: 27, city: 'Ciudad de México', phone: '8901234567', email: 'miguel@example.com', salary: 13100},
            {id: 9, name: 'Sofia', age: 26, city: 'Puebla', phone: '9012345678', email: 'sofia@example.com', salary: 13300},
            {id: 10, name: 'Diego', age: 29, city: 'Tijuana', phone: '0123456789', email: 'diego@example.com', salary: 23400},
            {id: 11, name: 'Valeria', age: 24, city: 'Querétaro', phone: '1234567891', email: 'valeria@example.com', salary: 23600},
            {id: 12, name: 'Andrés', age: 31, city: 'León', phone: '2345678902', email: 'andres@example.com', salary: 23700}
        ];

        const config_default = {
            search: {
                value: '',
                fields: ['name', 'city', 'email','phone']
            },
            table: {
                cols: [
                    {label: 'ID', field: 'id', type: 'number', min: 1},
                    {label: 'Nombre', field: 'name', type : 'text'},
                    {label: 'Edad', field: 'age', type: 'number', min: 1, max: 120},
                    {label: 'Ciudad', field: 'city', type: 'text'},
                    {label: 'Telefono', field: 'phone', type: 'phone'},
                    {label: 'Email', field: 'email', type: 'email'},
                    {label: 'Sueldo', field: 'salary', type: 'money', min: 0},
                    {label: '*', field: 'actions', type: 'button', buttons: ["add", "edit", "delete", "save", "gedit"]}
                ],
                footer: {
                    label: 'Total de registros:',
                    field: 'count',
                    type: 'text'
                }
            },
            tableClass: 'trebeca',
            // Usando referencias a funciones (más seguro que eval)
            add: (event) => {btn_add(event)},
            edit: (event) => {btn_edit(event)},
            delete: (event) => {btn_delete(event)},   
            save: (event) => {btn_save(event)},
        };

        const btn_add = () => {
            console.log("Agregar nuevo registro");
        }
        
        const btn_edit = (event) => {
            const id = event.target.id;
            console.log("Editar registro id:", id);
            
        }

        const btn_delete = (event) => {
            const id = event.target.id;
            console.log("Eliminar registro id:", id);
        }

        const btn_save = (event) => {
            const id = event.target.id;
            console.log("Guardar registro id:", id);
        }

        document.addEventListener('DOMContentLoaded', trebeca(config_default, data));
    </script>
</body>
</html>
